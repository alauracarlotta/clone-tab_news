# TODO
# Quando o commit Ã© normal, $2 (COMMIT_SOURCE) vem vazio
# Quando o commit Ã© amend, $2 = amend
# Quando Ã© commit automÃ¡tico, $3 tem hash

#!/bin/sh

MSG_FILE="$1"
COMMIT_SOURCE="$2"

echo "ðŸ”¥ PREPARE-COMMIT-MSG rodando..."
echo "MSG_FILE: $MSG_FILE"
echo "COMMIT_SOURCE: $COMMIT_SOURCE"

# Se a mensagem estiver vazia (commit normal sem amend)
contents=$(grep -vE '^(#|$)' "$MSG_FILE")

if [ -z "$contents" ]; then
  echo "âš¡ Mensagem vazia â€” rodando Commitizen"
  exec < /dev/tty
  npx cz --hook || true
fi

exit 0
