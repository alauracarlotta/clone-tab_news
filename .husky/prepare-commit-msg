#!/bin/sh

MSG_FILE=$1
COMMIT_SOURCE=$2
SHA1=$3

# ğŸ” ObtÃ©m o conteÃºdo real ignorando linhas que comeÃ§am com #
REAL_MESSAGE=$(grep -v '^\s*#' "$MSG_FILE" | tr -d '[:space:]')

# ğŸ¤œ Caso AMEND â†’ nÃ£o abre menu
if [ -n "$SHA1" ]; then
  exit 0
fi

# ğŸ¤œ Caso jÃ¡ exista mensagem real â†’ nÃ£o chama CZ
if [ -n "$REAL_MESSAGE" ]; then
  exit 0
fi

# ğŸ¤œ Caso contrÃ¡rio â†’ menu do CZ
exec < /dev/tty && npx cz --hook --no-edit || true
