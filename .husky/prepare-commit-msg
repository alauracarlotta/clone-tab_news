#!/bin/sh
# Quando o commit é normal, $2 (COMMIT_SOURCE) vem vazio
# Quando o commit é amend, $2 = amend
# Quando é commit automático, $3 tem hash

# Se EXISTE uma mensagem de commit e NÃO for amend
if [ -n "$2" ] && [ "$2" = "commit" ]; then
  exit 0
fi

# Se for amend, deixa o editor abrir normalmente
if [ "$2" = "amend" ]; then
  exit 0
fi

# Caso NORMAL: chama commitizen
exec < /dev/tty
npx cz --hook || true
