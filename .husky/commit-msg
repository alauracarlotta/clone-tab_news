#!/bin/sh
MSG_FILE=$1

echo "ğŸ§½ commit-msg rodando â€“ limpando editor"

# Se a mensagem tem conteÃºdo vÃ¡lido
contents=$(grep -vE '^(#|$)' "$MSG_FILE")

if [ -n "$contents" ]; then
  echo "âœ” Mensagem vÃ¡lida detectada, rodando lint"
  # Rodamos commitlint AQUI
  npx commitlint --edit "$MSG_FILE"
  exit $?
fi

# Caso contrÃ¡rio, deixa abrir editor normalmente
echo "â„¹ï¸ Mensagem vazia â€” editor serÃ¡ aberto"
exit 0
