#!/bin/sh
MSG_FILE=$1

echo "üßΩ commit-msg rodando ‚Äì limpando editor"
echo "-------------------------------------------"

# Se a mensagem tem conte√∫do v√°lido
contents=$(grep -vE '^(#|$)' "$MSG_FILE")

if [ -n "$contents" ]; then
  echo "‚úî Mensagem v√°lida detectada, rodando lint"
  # Rodamos commitlint AQUI
  npx commitlint --edit "$MSG_FILE"
  exit $?
fi

# Caso contr√°rio, deixa abrir editor normalmente
echo "‚ÑπÔ∏è Mensagem vazia ‚Äî editor ser√° aberto"
exit 0

echo "-------------------------------------------"
